!function(t){function n(r){if(e[r])return e[r].exports;var a=e[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}({0:function(t,n,e){/*!
	 * Chameleon
	 *
	 * Copyright 2015 ghostwords.
	 *
	 * This Source Code Form is subject to the terms of the Mozilla Public
	 * License, v. 2.0. If a copy of the MPL was not distributed with this
	 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
	 *
	 */
!function(){function t(t,n){var e=document.documentElement,r=document.createElement("script");r.text=t,r.async=!1;for(var a in n)r.setAttribute("data-"+a.replace("_","-"),n[a]);e.insertBefore(r,e.firstChild),e.removeChild(r)}var n=Math.random(),r=e(85),a=e(32).sendMessage;document.addEventListener(n,function(t){a("trapped",t.detail)}),t(r,{event_id:n})}()},32:function(t,n){/*!
	 * Chameleon
	 *
	 * Copyright 2015 ghostwords.
	 *
	 * This Source Code Form is subject to the terms of the Mozilla Public
	 * License, v. 2.0. If a copy of the MPL was not distributed with this
	 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
	 *
	 */
t.exports.sendMessage=function(t,n,e){var r=[{name:t}];"[object Function]"==Object.prototype.toString.call(n)?r.push(n):(n&&(r[0].message=n),e&&r.push(e)),chrome.runtime.sendMessage.apply(chrome.runtime,r)}},85:function(t,n){t.exports="/*!\n * Chameleon\n *\n * Copyright 2015 ghostwords.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n */\n\n/*\n * Injected via inject.js. Not a content script, no chrome.* API access.\n */\n\n(function (undef, ERROR, navigator) {\n\n\t// TODO defend all overridden methods against toString inspection\n\t// for example:\n\t//navigator.taintEnabled.toString = function () {\n\t//\treturn \"function taintEnabled() {\\n    [native code]\\n}\";\n\t//};\n\n\t// TODO unnecessary?\n\tERROR.stackTraceLimit = Infinity; // collect all frames\n\n\tvar event_id = document.currentScript.getAttribute('data-event-id');\n\n\tvar NAVIGATOR_ENUMERATION = {};\n\n\tfunction log() {\n\t\tif (true) {\n\t\t\tconsole.log.apply(console, arguments);\n\t\t}\n\t}\n\n\t// from Underscore v1.6.0\n\tfunction debounce(func, wait, immediate) {\n\t\t'[native code]';\n\t\tvar timeout, args, context, timestamp, result;\n\n\t\tvar later = function () {\n\t\t\t'[native code]';\n\t\t\tvar last = Date.now() - timestamp;\n\t\t\tif (last < wait) {\n\t\t\t\ttimeout = setTimeout(later, wait - last);\n\t\t\t} else {\n\t\t\t\ttimeout = null;\n\t\t\t\tif (!immediate) {\n\t\t\t\t\tresult = func.apply(context, args);\n\t\t\t\t\tcontext = args = null;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\treturn function () {\n\t\t\t'[native code]';\n\t\t\tcontext = this;\n\t\t\targs = arguments;\n\t\t\ttimestamp = Date.now();\n\t\t\tvar callNow = immediate && !timeout;\n\t\t\tif (!timeout) {\n\t\t\t\ttimeout = setTimeout(later, wait);\n\t\t\t}\n\t\t\tif (callNow) {\n\t\t\t\tresult = func.apply(context, args);\n\t\t\t\tcontext = args = null;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t};\n\t}\n\n\t// messages the injected script\n\tvar send = (function () {\n\t\t'[native code]';\n\t\tvar messages = [];\n\n\t\t// debounce sending queued messages\n\t\tvar _send = debounce(function () {\n\t\t\t'[native code]';\n\t\t\tdocument.dispatchEvent(new CustomEvent(event_id, {\n\t\t\t\tdetail: messages\n\t\t\t}));\n\n\t\t\t// clear the queue\n\t\t\tmessages = [];\n\t\t}, 100);\n\n\t\treturn function (msg) {\n\t\t\t'[native code]';\n\t\t\t// queue the message\n\t\t\tmessages.push(msg);\n\n\t\t\t_send();\n\t\t};\n\t}());\n\n\tvar detectNavigatorEnumeration = (function () {\n\t\t'[native code]';\n\t\tvar accesses = {},\n\t\t\tcheckers = {};\n\n\t\tvar make_checker = function (script_url) {\n\t\t\treturn function () {\n\t\t\t\t'[native code]';\n\t\t\t\tvar enumeration = true;\n\n\t\t\t\tfor (var key in NAVIGATOR_ENUMERATION) {\n\t\t\t\t\tif (NAVIGATOR_ENUMERATION.hasOwnProperty(key)) {\n\t\t\t\t\t\tif (!accesses[script_url].hasOwnProperty(key)) {\n\t\t\t\t\t\t\tenumeration = false;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (enumeration) {\n\t\t\t\t\tlog(\"Navigator enumeration detected from\", script_url);\n\t\t\t\t\tsend({\n\t\t\t\t\t\textra: {\n\t\t\t\t\t\t\tnavigatorEnumeration: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscriptUrl: script_url\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// clean up\n\t\t\t\tdelete accesses[script_url];\n\t\t\t\tdelete checkers[script_url];\n\t\t\t};\n\t\t};\n\n\t\treturn function (prop, script_url) {\n\t\t\t'[native code]';\n\t\t\t// store the access\n\t\t\tif (!accesses.hasOwnProperty(script_url)) {\n\t\t\t\taccesses[script_url] = {};\n\t\t\t}\n\t\t\taccesses[script_url][prop] = true;\n\n\t\t\t// check if enumeration has happened in a bit\n\t\t\tif (!checkers.hasOwnProperty(script_url)) {\n\t\t\t\tcheckers[script_url] = debounce(make_checker(script_url), 90);\n\t\t\t}\n\t\t\tcheckers[script_url]();\n\t\t};\n\t}());\n\n\t// http://code.google.com/p/v8/wiki/JavaScriptStackTraceApi\n\tfunction getStackTrace(structured) {\n\t\t'[native code]';\n\t\tvar err = {}, // TODO should this be new Error() instead?\n\t\t\torigFormatter,\n\t\t\tstack;\n\n\t\tif (structured) {\n\t\t\torigFormatter = ERROR.prepareStackTrace;\n\t\t\tERROR.prepareStackTrace = function (err, structuredStackTrace) {\n\t\t\t\treturn structuredStackTrace;\n\t\t\t};\n\t\t}\n\n\t\tERROR.captureStackTrace(err, getStackTrace);\n\t\tstack = err.stack;\n\n\t\tif (structured) {\n\t\t\tERROR.prepareStackTrace = origFormatter;\n\t\t}\n\n\t\treturn stack;\n\t}\n\n\t/*\n\tTODO Doesn't work when the stack trace contains <anonymous> fileNames.\n\tFor example: http://blogs.wsj.com/digits/2014/07/16/newest-hit-game-maker-machine-zone-nears-3-billion-valuation/\n\t\tat Navigator.Object.defineProperty.get [as userAgent] (chrome-extension://.../js/builds/injected.min.js:2:1027)\n\t\tat Object.self.doTag (<anonymous>:33:1230)\n\t\tat bk_doSendData (<anonymous>:33:2259)\n\t\tat Object.blueKai.blueKai.sendBlueKai (<anonymous>:55:3)\n\t\tat Object.blueKai.blueKai.getAdsData (<anonymous>:147:8)\n\t\tat <anonymous>:1:17\n\tSeems related to setTimeout use.\n\n\tTODO Doesn't work when the script gets loaded via eval.\n\tFor example, see globalEval in http://code.jquery.com/jquery-1.6.4.js,\n\tused on http://fingerprint.pet-portal.eu/, apparently here:\n\t\t$.get(\"?controller=fingerprint&t=\"+(new Date().getTime()), function(data) {\n\t\t\t$('body').append(data);\n\t\t});\n\tThe stack trace:\n\t\tat Navigator.Object.defineProperty.get [as language] (chrome-extension://.../js/builds/injected.min.js:2:1020)\n\t\tat start_test (eval at <anonymous> (eval at <anonymous> (http://fingerprint.pet-portal.eu/javascript/jquery.min.js:2:12388)), <anonymous>:1:1079)\n\tAppears to be double eval'd: once by jQuery and again by Dean Edwards' Packer.\n\tAnother eval'd script example here: http://lomavistarecordings.com/\n\t*/\n\tfunction getOriginatingScriptUrl() {\n\t\t'[native code]';\n\t\tvar trace = getStackTrace(true);\n\n\t\t// TODO investigate\n\t\tif (trace.length < 2) {\n\t\t\treturn '';\n\t\t}\n\n\t\t// this script is at 0 and 1\n\t\tvar callSite = trace[2];\n\n\t\tif (callSite.isEval()) {\n\t\t\t// TODO\n\t\t\t/*\n\t\t\t * CAUTION hangs http://blogs.wsj.com/digits/2014/07/16/newest-hit-game-maker-machine-zone-nears-3-billion-valuation/\n\t\t\tvar f = arguments.callee.caller.caller; // jshint ignore:line\n\t\t\twhile (f) {\n\t\t\t\tlog('XXX', f);\n\t\t\t\tf = f.caller;\n\t\t\t}\n\t\t\t*/\n\n\t\t\t// argh, getEvalOrigin returns a string ...\n\t\t\tvar eval_origin = callSite.getEvalOrigin(),\n\t\t\t\tscript_url_matches = eval_origin.match(/\\((http.*:\\d+:\\d+)/);\n\n\t\t\treturn script_url_matches && script_url_matches[1] || eval_origin;\n\t\t} else {\n\t\t\treturn callSite.getFileName() + ':' + callSite.getLineNumber() + ':' + callSite.getColumnNumber();\n\t\t}\n\t}\n\n\tfunction stripLineAndColumnNumbers(script_url) {\n\t\treturn script_url.replace(/:\\d+:\\d+$/, '');\n\t}\n\n\tfunction getObjectName(o) {\n\t\treturn o.toString().replace(/^\\[object ([^\\]]+)\\]/, '$1');\n\t}\n\n\tfunction trap(obj, prop) {\n\t\t'[native code]';\n\t\tvar desc = Object.getOwnPropertyDescriptor(obj, prop);\n\n\t\tif (desc && !desc.configurable) {\n\t\t\tlog(\"%s.%s is not configurable\", obj, prop);\n\t\t\treturn;\n\t\t}\n\n\t\tvar is_navigator = (obj === navigator),\n\t\t\torig_val = obj[prop];\n\n\t\t//if (orig_val == console || orig_val == console.log) {\n\t\t//\treturn;\n\t\t//}\n\n\t\t//log(\"trapping %s.%s ...\", obj, prop);\n\n\t\tObject.defineProperty(obj, prop, {\n\t\t\tget: function () {\n\t\t\t\t'[native code]';\n\t\t\t\tvar script_url = getOriginatingScriptUrl();\n\n\t\t\t\tlog(\"%s.%s prop access: %s\", getObjectName(obj), prop, script_url);\n\t\t\t\tif (true) {\n\t\t\t\t\tlog(getStackTrace());\n\t\t\t\t}\n\n\t\t\t\tscript_url = stripLineAndColumnNumbers(script_url);\n\n\t\t\t\tif (is_navigator) {\n\t\t\t\t\tdetectNavigatorEnumeration(prop, script_url);\n\t\t\t\t}\n\n\t\t\t\tsend({\n\t\t\t\t\tobj: getObjectName(obj),\n\t\t\t\t\tprop: prop.toString(),\n\t\t\t\t\tscriptUrl: script_url\n\t\t\t\t});\n\n\t\t\t\treturn orig_val;\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction trapInstanceMethod(item) {\n\t\t'[native code]';\n\t\tvar is_canvas_write = (\n\t\t\titem.propName == 'fillText' || item.propName == 'strokeText'\n\t\t);\n\n\t\titem.obj[item.propName] = (function (orig) {\n\t\t\t'[native code]';\n\t\t\treturn function () {\n\t\t\t\t'[native code]';\n\t\t\t\tvar args = arguments;\n\n\t\t\t\tif (is_canvas_write) {\n\t\t\t\t\t// to avoid false positives,\n\t\t\t\t\t// bail if the text being written is too short\n\t\t\t\t\tif (!args[0] || args[0].length < 5) {\n\t\t\t\t\t\treturn orig.apply(this, args);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar script_url = getOriginatingScriptUrl(),\n\t\t\t\t\tmsg = {\n\t\t\t\t\t\tobj: item.objName,\n\t\t\t\t\t\tprop: item.propName,\n\t\t\t\t\t\tscriptUrl: stripLineAndColumnNumbers(script_url)\n\t\t\t\t\t};\n\n\t\t\t\tif (item.hasOwnProperty('extra')) {\n\t\t\t\t\tmsg.extra = item.extra.apply(this, args);\n\t\t\t\t}\n\n\t\t\t\tlog(\"%s.%s prop access: %s\", item.objName, item.propName, script_url);\n\n\t\t\t\tsend(msg);\n\n\t\t\t\tif (is_canvas_write) {\n\t\t\t\t\t// optimization: one canvas write is enough,\n\t\t\t\t\t// restore original write method\n\t\t\t\t\t// to this CanvasRenderingContext2D object instance\n\t\t\t\t\tthis[item.propName] = orig;\n\t\t\t\t}\n\n\t\t\t\treturn orig.apply(this, args);\n\t\t\t};\n\n\t\t}(item.obj[item.propName]));\n\t}\n\n\t// JS objects to trap //////////////////////////////////////////////////////////\n\n\t[\n\t\tnavigator,\n\t\twindow.screen\n\t].forEach(function (obj) {\n\t\t// trap all enumerable keys on the object and its prototype chain\n\t\tfor (var prop in obj) { // jshint ignore:line\n\t\t\tif (obj === navigator) {\n\t\t\t\tNAVIGATOR_ENUMERATION[prop] = true;\n\t\t\t}\n\t\t\ttrap(obj, prop);\n\t\t}\n\t});\n\n\ttrap(window, 'devicePixelRatio');\n\ttrap(window, 'innerWidth');\n\ttrap(window, 'innerHeight');\n\n\t// TODO breaks setting document.cookie since there is a getter but no setter\n\t//trap(document, 'cookie');\n\n\t// TODO document.body might not yet be available at this point\n\t//trap(document.body, 'clientWidth');\n\t//trap(document.body, 'clientHeight');\n\n\ttrap(document.documentElement, 'clientWidth');\n\ttrap(document.documentElement, 'clientHeight');\n\n\t// trap instance methods ///////////////////////////////////////////////////////\n\n\tvar methods = [\n\t\t// Date\n\t\t{\n\t\t\tobjName: 'Date.prototype',\n\t\t\tpropName: 'getTimezoneOffset',\n\t\t\tobj: Date.prototype\n\t\t},\n\n\t\t// WebGL\n\t\t{\n\t\t\tobjName: 'WebGLRenderingContext.prototype',\n\t\t\tpropName: 'getParameter',\n\t\t\tobj: window.WebGLRenderingContext.prototype\n\t\t},\n\t\t{\n\t\t\tobjName: 'WebGLRenderingContext.prototype',\n\t\t\tpropName: 'getSupportedExtensions',\n\t\t\tobj: window.WebGLRenderingContext.prototype\n\t\t}\n\t];\n\n\t// canvas fingerprinting\n\t['getImageData', 'fillText', 'strokeText'].forEach(function (method) {\n\t\tvar item = {\n\t\t\tobjName: 'CanvasRenderingContext2D.prototype',\n\t\t\tpropName: method,\n\t\t\tobj: CanvasRenderingContext2D.prototype,\n\t\t\textra: function () {\n\t\t\t\treturn {\n\t\t\t\t\tcanvas: true\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\n\t\tif (method == 'getImageData') {\n\t\t\titem.extra = (function (getImageDataOrig, toDataURLOrig) {\n\t\t\t\t'[native code]';\n\t\t\t\treturn function () {\n\t\t\t\t\t'[native code]';\n\t\t\t\t\tvar args = arguments,\n\t\t\t\t\t\twidth = args[2],\n\t\t\t\t\t\theight = args[3];\n\n\t\t\t\t\t// \"this\" is a CanvasRenderingContext2D object\n\t\t\t\t\tif (width === undef) {\n\t\t\t\t\t\twidth = this.canvas.width;\n\t\t\t\t\t}\n\t\t\t\t\tif (height === undef) {\n\t\t\t\t\t\theight = this.canvas.height;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tcanvas: true,\n\t\t\t\t\t\tdataURL: (function () {\n\t\t\t\t\t\t\t'[native code]';\n\t\t\t\t\t\t\tvar el = document.createElement('canvas');\n\t\t\t\t\t\t\tel.width = width;\n\t\t\t\t\t\t\tel.height = height;\n\t\t\t\t\t\t\tel.getContext('2d').putImageData(\n\t\t\t\t\t\t\t\tgetImageDataOrig.call(\n\t\t\t\t\t\t\t\t\tthis, 0, 0, width, height\n\t\t\t\t\t\t\t\t), 0, 0\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\treturn toDataURLOrig.call(el);\n\t\t\t\t\t\t}.call(this)),\n\t\t\t\t\t\twidth: width,\n\t\t\t\t\t\theight: height\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t}(CanvasRenderingContext2D.prototype.getImageData, HTMLCanvasElement.prototype.toDataURL));\n\t\t}\n\n\t\tmethods.push(item);\n\t});\n\tmethods.push({\n\t\tobjName: 'HTMLCanvasElement.prototype',\n\t\tpropName: 'toDataURL',\n\t\tobj: HTMLCanvasElement.prototype,\n\t\textra: (function (toDataURLOrig) {\n\t\t\t'[native code]';\n\t\t\treturn function () {\n\t\t\t\t'[native code]';\n\t\t\t\t// \"this\" is a canvas element\n\t\t\t\treturn {\n\t\t\t\t\tcanvas: true,\n\t\t\t\t\tdataURL: toDataURLOrig.call(this),\n\t\t\t\t\twidth: this.width,\n\t\t\t\t\theight: this.height\n\t\t\t\t};\n\t\t\t};\n\t\t}(HTMLCanvasElement.prototype.toDataURL))\n\t});\n\n\tmethods.forEach(trapInstanceMethod);\n\n\t// trap constructors ///////////////////////////////////////////////////////////\n\n\t// from http://nullprogram.com/blog/2013/03/24/\n\tfunction create(constructor) {\n\t\t'[native code]';\n\t\tvar Factory = constructor.bind.apply(constructor, arguments);\n\t\treturn new Factory();\n\t}\n\t[\n\t\t// WebRTC\n\t\t{\n\t\t\tobj: window,\n\t\t\tprop: 'RTCPeerConnection'\n\t\t},\n\t\t{\n\t\t\tobj: window,\n\t\t\tprop: 'webkitRTCPeerConnection'\n\t\t}\n\t].forEach(function (item) {\n\t\tif (item.obj.hasOwnProperty(item.prop)) {\n\t\t\titem.obj[item.prop] = (function (Orig) {\n\t\t\t\t'[native code]';\n\t\t\t\treturn function () {\n\t\t\t\t\t'[native code]';\n\t\t\t\t\tvar script_url = getOriginatingScriptUrl();\n\n\t\t\t\t\tlog(\"%s constructor call: %s\", item.prop, script_url);\n\t\t\t\t\tsend({\n\t\t\t\t\t\tobj: item.prop,\n\t\t\t\t\t\tscriptUrl: stripLineAndColumnNumbers(script_url)\n\t\t\t\t\t});\n\n\t\t\t\t\tvar args = [Orig].concat(Array.prototype.slice.call(arguments));\n\t\t\t\t\treturn create.apply(this, args);\n\t\t\t\t};\n\t\t\t}(item.obj[item.prop]));\n\t\t}\n\t});\n\n\t// font enumeration detection workaround ///////////////////////////////////////\n\n\tvar observer = new MutationObserver(function (mutations) {\n\t\tfor (var i = 0; i < mutations.length; i++) {\n\t\t\tvar mutation = mutations[i];\n\n\t\t\tif (!mutation.oldValue || mutation.oldValue.indexOf('font-family: ') == -1) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar target = mutation.target,\n\t\t\t\told_font = mutation.oldValue.match(/font-family: ([^;]+);/)[1],\n\t\t\t\tfonts = [];\n\n\t\t\t// TODO switch to WeakMaps\n\t\t\t// TODO https://github.com/Benvie/WeakMap\n\t\t\t// TODO https://gist.github.com/Gozala/1269991\n\t\t\tif (!(event_id in target.dataset)) {\n\t\t\t\ttarget.dataset[event_id] = '';\n\t\t\t} else {\n\t\t\t\tfonts = target.dataset[event_id].split(';');\n\t\t\t}\n\n\t\t\tif (fonts.indexOf(old_font) == -1) {\n\t\t\t\tfonts.push(old_font);\n\t\t\t}\n\n\t\t\tlog(fonts); // TODO\n\n\t\t\tif (fonts.length > 2) {\n\t\t\t\tlog(mutation); // TODO\n\n\t\t\t\t// TODO since MutationObserver is async, a stack trace now\n\t\t\t\t// TODO won't get us the script that originated the scanning\n\t\t\t\tsend({\n\t\t\t\t\textra: {\n\t\t\t\t\t\tfontEnumeration: true\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// no need to keep listening\n\t\t\t\tobserver.disconnect();\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\ttarget.dataset[event_id] = fonts.join(';');\n\t\t}\n\t});\n\tobserver.observe(document, {\n\t\tattribute: true,\n\t\t// TODO more precise filtering?\n\t\tattributeFilter: ['style'],\n\t\tattributeOldValue: true,\n\t\tchildList: false,\n\t\tsubtree: true\n\t});\n\n// save locally to keep from getting overwritten by site code\n}(undefined, Error, window.navigator));\n"}});
